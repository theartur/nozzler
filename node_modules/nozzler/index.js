// Nozzler Core

console.log("\n-- Nozzler --\n");

var pumper = require("pumper");

module.exports = {
    createSession: function (url, wallet) {
//      - access nozzle
//      - identify challenge
//      - capture challenge
//      - save it to show
//      - hang session
//      - wait for solution

        var casper = require('casper').create({
            pageSettings: { 
                webSecurityEnabled: false 
            },
            waitTimeout: 60000,
        //     verbose: true,
        //     logLevel: "debug"
        });
        
        casper.start(url, function() {
            pumper.injectWallet(wallet);
        });
        
        return casper;
    }
};